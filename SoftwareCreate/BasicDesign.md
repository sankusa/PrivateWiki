## 基本設計
### 目的
要件定義を元に、要求実現のための具体的な機能を定めていく  
要件定義書はあくまでもシステムの機能や性能を定めたものであり、それを実現するための詳細な内容は含まれていない。  
画面レイアウトや表示するデータ、表示する情報など細かな点を決定していく。  
モジュール単位で分割して設計していくことが多い。  

### 共通
#### 基本設計では基本設計書を作成する  
基本設計では最終的に基本設計書という成果物を作成する。  
文章だけで作成するのではなく、図を用いて視覚的に分かりやすくすることが重要。  

#### 次のフェーズの詳細設計に繋げる  
基本設計の成果物は次のフェーズの詳細設計に渡される。  
基本設計で十分な内容の成果物を作成できなければ、以降のフェーズに影響を及ぼす。  

### ゲーム
とにかく機能一覧  

### 参考
[ゲーム制作の流れは、企画→設計→実装・テスト→完成。 ゲームクリエイターたちが工程ごとに役割を分担し、ゲームを作りあげます。](https://www.neec.ac.jp/department/design/gamecreator/process/)  

### 仕様書網羅
[(参考)(画像アリ)](https://note.com/optimal_sdw_com/n/ndfa3af81043f)  
#### ・命名規則  
システムの機能や画面、帳票などに識別IDを付与する際のIDの付け方や、DBのテーブル名、項目名の付け方(IDはXXX_id、コードはやXXX_code、名称はXXX_nameなど)などを定義。
#### ・機能一覧
社員情報一覧、社員情報詳細、組織情報一覧、組織情報詳細・・・といったシステム内で登場する機能を一覧表に列挙。  
記述する粒度としては、一つの画面として成立するような機能、メニューの単位になるような大枠の機能で記述。    
社員情報を一覧表示する画面単位の機能として、例えば社員情報を登録する画面で組織情報を入力する際に、入力補助機能として組織情報検索のポップアップ画面を表示する機能などがあるが、このようなポップアップ画面も一つの機能として機能一覧に記載する。  
しかしながら、社員情報一覧画面内にある社員情報の検索機能や出力結果の並び替え機能など、そのような細かい機能の単位で記述することはほとんどない。  
#### ・処理機能記述
機能一覧に記載した「機能」の処理の流れをフローチャートなどの図や説明を用いて記述する。  
例えば社員情報一覧であれば「画面を初期表示する」、「検索をする」、「検索条件をクリアする」、「検索結果を並び替える」、「検索結果の一覧表からデータを選択して詳細画面を表示する」などといった当該機能で起きるアクションに基づく「処理」それぞれの説明を記述する。  
初期表示であれば、メニューから当該画面に遷移して、デフォルトの検索条件である〇〇で社員情報マスタからデータを取得し、社員情報一覧に結果を描画する、あるいは初期表示時は検索結果を表示せず、検索条件の入力欄を描画するなど、処理の流れを記述する。    
#### ・画面一覧
システムで登場する画面を一覧表にまとめる。  
例えば社員情報一覧画面、社員情報詳細画面、社員情報入力補助画面、組織情報一覧画面、組織情報詳細画面、組織情報入力補助画面などを一覧にまとめる。  
社員情報の詳細情報を表示するような「詳細画面」は、照会画面、入力画面、入力内容確認画面、登録完了画面など、同一レイアウトで項目の入力可否の違いだけの画面パターンがあることが多い。  
これらは一つ一つの画面として定義する場合もあるが、モードの違いとして一つの仕様書にまとめられることが多い。  
レイアウトが大きく異なる場合や、わけたほうが記述しやすい場合もあるので、記述する粒度はプロジェクトや案件によって少し異なる。  
#### ・画面仕様書
画面一覧に記述した画面ひとつひとつの項目の並びや画面で発生するイベント、入力チェック仕様にDBの保存先など細かな定義を記述する。  
画面がユーザーインターフェースの中心となっている以上、当該仕様書が基本設計の大半を占める。  
画面仕様書とDB設計があればシステム機能のほとんどを構築できると言っても過言ではないほど重要な仕様書。  
画面仕様書を見ればどのような入力項目があり、どのようにデータベースへ保存するのかがわかる。  
#### ・画面遷移図
画面と画面のつながりを表した図。  
例えば共通メニューから社員情報一覧画面や組織情報一覧画面へ遷移し、一覧画面から社員情報詳細や組織情報詳細などの個々の詳細情報画面へ遷移するといった情報を図で記述する。  
よくある図としてはオートシェイプの四角と矢印を使って、四角を画面、矢印を遷移先の画面への繋ぎとして記述する。  
#### ・項目ラベル名一覧
全画面で利用する項目名の一覧。  
例えば担当者名であったり担当者氏名だったり、同じ項目に対して似たような別の名称をつけてしまうことがありますが、一覧にまとめることでこのような表記揺れを防ぐことができる。  
また、実装面において多言語対応されるケースも多い。昨今のフレームワークにおいては項目名にIDを指定すると、指定言語に応じて紐づくラベル名に自動変換してくれる。  
上記のような機能を利用する場合にも日本語の項目名と英語の項目名を同じIDに紐づけて一覧で定義する。  
#### ・エラーメッセージ一覧  
エラーコードとエラーメッセージを一覧で定義する。  
こちらも項目ラベル名一覧と同様に日本語エラーメッセージ、英語エラーメッセージを同一のIDに紐づけて定義する。  
ワーニングも当該一覧に定義する。  
#### ・帳票一覧  
#### ・帳票仕様書  
#### ・ファイル一覧  
システムで出力するファイルの一覧。  
主にユーザ操作によって出力するファイルを記述するものであり、ログファイルなどシステムの裏側で作られるファイルは含まれない。  
例えばCSVファイルのようなデータ出力を主としたファイルを一覧に記述する。  
#### ・ファイル仕様書  
ファイル一覧に定義したファイルの詳細を定義する。  
ファイルがテキストファイルなのかバイナリファイルなのか、テキストファイルであれば文字コードが何かなどを含め定義する。  
#### ・外部インターフェース一覧  
連携する外部システムの一覧。  
例えばGoogle Driveとの連携、クラウドサインといった外部サービスとの連携、自社の基幹システムとの連携等々、別のシステムとの連携を行う場合に記載します。  
#### ・外部インターフェース仕様書
外部インターフェース一覧に記載した外部システムとの連携方法や連携するデータの項目レイアウトなどを定義する。  
バッチ処理で実装されることもあり、その場合はバッチ処理仕様書に詳細処理を記述し、連携するデータの項目レイアウトのみを外部インターフェース仕様書に記載する。  
#### ・バッチ処理一覧
システムで実行するバッチ処理の一覧。
例えば日次でシステムから案内メールを送信したり、バックアップ処理を行ったり、比較的多量のデータを処理するプログラムをメインのシステムサービスとは別に独立実行する。  
処理に時間のかかるものが多いため、基本的にはユーザアクセスの少ない時間帯に実行することが多い。  
#### ・バッチ処理仕様書
バッチ処理一覧に記載されたバッチ処理の詳細を記述する。
日次なのか週次なのか月次なのかといった実行タイミングと、どのような処理を実行するのかを記述する。  
#### ・システムメール一覧
システムから送信する通知メールの一覧。
#### ・システムメール定義書
システムメールの宛先、件名、本文について記述する。  
宛先はメールアドレス固定のケースよりも例えばログインユーザであったり、申請者や承認者といった何かしらの「ユーザ」を示す言葉で定義することが多い。  
本文についても、固定の文章部分と差し替えて利用する部分がわかるように記述する。  
#### ・DBテーブル一覧
データベース(DB)のテーブル名一覧。  
社員情報テーブルや組織情報テーブル、それらを紐づける所属組織テーブルなどシステムに必要なデータを保存するテーブルを列挙する。  
#### ・DBテーブル定義書  
DBテーブル一覧に記載したテーブルの項目レイアウトを定義する。
レコードを一意に特定するためのキー項目は何か、項目のデータ型は数値なのか文字なのか日付なのかといった情報を記述する。  
このDBテーブル定義書をもとにCREATE TABLE文などを生成するため、重要な設計書の一つ。  
#### ・DBビュー一覧
DBのビューの一覧。
ビューとは、テーブルとテーブルを予め結合して、一つのテーブルのように見せるもの。  
#### ・DBビュー定義書
DBビュー一覧に記述したビューの詳細を記述する。  
ビューを構成するテーブル名、それらの結合条件、および項目名を列挙する。  
#### ・ER図  
DBテーブルの関連図。  
例えば社員情報と組織の関連を表す場合、「社員」からみて所属する「組織」は複数ある。(例えばaさんがA部とB部を兼務するケース)  
「組織」からみて所属する「社員」も複数。(例えば、A部にはaさん、bさん、cさんと複数の方がある。B部にもaさん(兼務)、dさん、eさんと複数の方がいる。)  
上記のような関係を四角と線を用いてデータのつながりを表すのがER図。  
データ1つに対して同じくデータが1つ紐づくのか1対1の関係、複数紐づく場合は1対多の関係になる。  
「多」を表す場合は、専用の記号あるいは「*」を利用する。  
例えば【社員】1-*【所属組織】*-1【組織】のようにオートシェイプなどで図を構築していく。  
この図があるとテーブル間の関連が理解でき、データをどのように管理するかを把握することができるため、重要な設計書の一つ。  
#### ・コード一覧 ※ 各種区分値
システム全体で利用するフラグや区分の値を一覧化したもの。
例えば社員の分類として1:社員、2:契約社員、3:ビジネスパートナーのように区分を設けることがある。  
これらの区分の値を一意に示すコード(1,2,3)とコードの名称(社員、契約社員、ビジネスパートナー)を記載する。  
#### ・セキュリティ仕様書 ※ XSS対策など  
システム全体のセキュリティ方針を記載する。  
XSS対応、パスワードソルト、社員情報の暗号化、社員情報一覧を表示するページのキャッシュ化無効等々どんな対策を実施するのかを記述する。  
#### ・ワークフロー一覧 ※ ワークフローのあるシステムの場合  
システムで利用するワークフローを一覧にまとめたもの。  
社内IT機器の利用申請や研修申込申請などといった申請処理と承認処理を行う機能が必要な場合に記述する。  
#### ・ワークフロー定義 ※ ワークフローのあるシステムの場合  
ワークフロー一覧に記載したワークフローの詳細を記述する。  
ワークフロー機能が無ければ記述することはない。  
例えば、PCの外部モニタを追加調達する際に、利用者がPCモニタの利用申請を行い、部門長が承認し、総務の機器調達チームのリーダーが承認するといった流れを定義する。  
誰が申請を行い、誰が承認するのか、申請する際、承認する際におけるシステムメールの有無、購入金額等によって承認者のルートが変わるのか否かなどを記述する。  
#### ・アプリケーション仕様 ※ログ出力方式、文字コード、実行環境等々  
アプリケーション仕様はシステムを構築する上での基本ルールを定義したもの。  
例えば以下のような事柄を記述する。  
```
・システム構成(Webサーバ、DBサーバ、帳票サーバ等々の構成)
・ファイル配置方式(ソースファイルのフォルダ階層)
・開発モデル(利用するプログラミング言語、フレームワークなど)
・処理フロー方式(画面とサーバ間の処理の流れ)
・メッセージ方式(多言語対応の有無、メッセージの表示方法)
・文字コード
・ログ出力方式
・例外処理方式
・入力チェック方式(入力チェック時のエラー表示方法など)
・制御方式(多重リクエストの防止、ブラウザの戻るボタン制御等)
・認証方式
・認可方式
・セッション管理
・DBアクセス方式
・採番方式
・排他制御方式
・ファイルアップロード、ダウンロード方式
・メール送信方式
```

### 小規模であれば
・命名規則  
・機能一覧  
・画面一覧  
・画面仕様書  
・画面遷移図  
・帳票一覧  
・ファイル一覧  
・外部インターフェース一覧  
・外部インターフェース仕様書  
・バッチ処理一覧  
・バッチ処理仕様書  
・システムメール一覧  
・システムメール定義書  
・DBテーブル一覧  
・DBテーブル定義書  
・ER図  
・コード一覧  
・アプリケーション仕様  

※ 帳票仕様、ファイル仕様は実ファイルのイメージで管理  
※ ビューが存在する場合はDBテーブル定義書内に記述  
※ セキュリティ対策、ワークフロー等のビジネスルールはアプリケーション仕様にまとめる  
